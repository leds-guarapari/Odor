<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8' />
        <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
        <link rel='stylesheet' href='lib/leaflet/leaflet.css' />
        <script src = 'lib/leaflet/leaflet.js'></script>
        <style>
            body { margin:0; padding:0; }
            #map { position:absolute; top:0; bottom:0; width:100%; }
        </style>
    </head>
    <body>
        <div id='map'></div>
        <script>
            var regex = /https:\/\/cloud\-odor\.web\.app\/#([0-9]+)\/(-?[0-9]+\.[0-9]+)\/(-?[0-9]+\.[0-9]+)/;
            var match = regex.exec(window.location.href);
            var zoom = (match) ? match[1] : 13;
            var latitude = (match) ? match[2] : -20.209329;
            var longitude = (match) ? match[3] : -40.2644945;
            location.replace("#" + zoom + "/" + latitude + "/" + longitude);
            var map = L.map('map').setView([latitude, longitude], zoom);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
            }).addTo(map);
            map.on('moveend', function(e) {
                var point = map.getCenter();
                location.replace("#" + zoom + "/" + point.lat + "/" + point.lng);
            });
        </script>
    </body>
</html>